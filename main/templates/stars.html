<div class="flex">
  {% if row.reviews_rating %}
      {% with full_stars=row.reviews_rating|floatformat:0 %}  {# Get the number of full stars #}
          {% with has_half_star=row.reviews_rating|add:"-full_stars" %}
              {% for star in "01234" %}  {# Loop over the range for 5 stars #}
                  {% if star|add:0 < full_stars %}  {# Full star condition #}
                      <!-- Full star -->
                      <svg
                          class="w-5 h-5 text-green-500"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          aria-hidden="true"
                      >
                          <path d="M10 15.27L16.18 20l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 5.73L3.82 20z" />
                      </svg>
                  {% elif star|add:0 == full_stars and has_half_star|floatformat:1 >= 0.5 %}  {# Half star condition #}
                      <!-- Half star -->
                      <svg
                          class="w-5 h-5 text-green-500"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          aria-hidden="true"
                      >
                          <path d="M10 15.27L16.18 20l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 5.73L3.82 20z" />
                          <path d="M10 0l2.39 6.63 7.19.61-5.46 5.73 1.64 7.03L10 15.27 3.82 20l1.64-7.03L0 7.24l7.19-.61z" opacity="0.5" />
                      </svg>
                  {% else %}
                      <!-- Empty star -->
                      <svg
                          class="w-5 h-5 text-gray-300"
                          xmlns="http://www.w3.org/2000/svg"
                          fill="currentColor"
                          viewBox="0 0 20 20"
                          aria-hidden="true"
                      >
                          <path d="M10 15.27L16.18 20l-1.64-7.03L20 7.24l-7.19-.61L10 0 7.19 6.63 0 7.24l5.46 5.73L3.82 20z" />
                      </svg>
                  {% endif %}
              {% endfor %}
          {% endwith %}
      {% endwith %}
  {% endif %}
</div>
